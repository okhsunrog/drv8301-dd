# Page 1

# DRV8301 Three-Phase Gate Driver With Dual Current Shunt Amplifiers and Buck Regulator 

## 1 Features

- 6-V to 60-V Operating Supply Voltage Range
- 1.7-A Source and 2.3-A Sink Gate Drive Current Capability
- Slew Rate Control for EMI Reduction
- Bootstrap Gate Driver With 100\% Duty Cycle Support
- 6- or 3-PWM Input Modes
- Dual Integrated Current Shunt Amplifiers With Adjustable Gain and Offset
- Integrated 1.5-A Buck Converter
- 3.3-V and 5-V Interface Support
- SPI
- Protection Features:
- Programmable Dead Time Control (DTC)
- Programmable Overcurrent Protection (OCP)
- PVDD and GVDD Undervoltage Lockout (UVLO)
- GVDD Overvoltage Lockout (OVLO)
- Overtemperature Warning/Shutdown (OTW/OTS)
- Reported Through nFAULT, nOCTW, and SPI Registers


## 2 Applications

- 3-Phase BLDC and PMSM Motors
- CPAPs and Pumps
- E-bikes
- Power Tools
- Robotics and RC Toys
- Industrial Automation


## 3 Description

The DRV8301 is a gate driver IC for three-phase motor drive applications. The device provides three half-bridge drivers, each capable of driving two N channel MOSFETs. The DRV8301 supports up to 1.7-A source and 2.3-A peak current capability. The DRV8301 can operate off of a single power supply with a wide range from $6-\mathrm{V}$ to $60-\mathrm{V}$. The device uses a bootstrap gate driver architecture with trickle charge circuitry to support 100\% duty cycle. The DRV8301 uses automatic handshaking when the high-side or low-side MOSFET is switching to prevent flow of current. Integrated VDS sensing of the high-side and low-side MOSFETs is used to protect the external power stage against overcurrent conditions.
The DRV8301 includes two current shunt amplifiers for accurate current measurement. The amplifiers support bidirectional current sensing and provide an adjustable output offset up to 3 V .
The DRV8301 also includes an integrated switching mode buck converter with adjustable output and switching frequency. The buck converter can provide up to 1.5 A to support MCU or additional system power needs.
The SPI provides detailed fault reporting and flexible parameter settings such as gain options for the current shunt amplifiers and slew rate control of the gate drivers.

Device Information ${ }^{(1)}$

| PART NUMBER | PACKAGE | BODY SIZE (NOM) |
| :-- | :-- | :-- |
| DRV8301 | HTSSOP (56) | $14.00 \mathrm{~mm} \times 8.10 \mathrm{~mm}$ |

(1) For all available packages, see the orderable addendum at the end of the data sheet.

## Simplified Schematic

![img-0.jpeg](img-0.jpeg)

An IMPORTANT NOTICE at the end of this data sheet addresses availability, warranty, changes, use in safety-critical applications, intellectual property matters and other important disclaimers. PRODUCTION DATA.

# Page 2

# Table of Contents 

1 Features ..... 1
2 Applications ..... 1
3 Description ..... 1
4 Revision History ..... 2
5 Pin Configuration and Functions ..... 3
6 Specifications ..... 6
6.1 Absolute Maximum Ratings ..... 6
6.2 ESD Ratings ..... 6
6.3 Recommended Operating Conditions ..... 7
6.4 Thermal Information ..... 7
6.5 Electrical Characteristics ..... 8
6.6 Current Shunt Amplifier Characteristics ..... 9
6.7 Buck Converter Characteristics ..... 10
6.8 SPI Timing Requirements (Slave Mode Only) ..... 10
6.9 Gate Timing and Protection Switching Characteristics ..... 11
6.10 Typical Characteristics ..... 12
7 Detailed Description ..... 13
7.1 Overview ..... 13
7.2 Functional Block Diagram ..... 14
7.3 Feature Description ..... 15
7.4 Device Functional Modes ..... 20
7.5 Programming ..... 21
7.6 Register Maps ..... 22
8 Application and Implementation ..... 24
8.1 Application Information ..... 24
8.2 Typical Application ..... 25
9 Power Supply Recommendations ..... 28
9.1 Bulk Capacitance ..... 28
10 Layout ..... 29
10.1 Layout Guidelines ..... 29
10.2 Layout Example ..... 30
11 Device and Documentation Support ..... 31
11.1 Documentation Support ..... 31
11.2 Community Resources ..... 31
11.3 Trademarks ..... 31
11.4 Electrostatic Discharge Caution ..... 31
11.5 Glossary ..... 31
12 Mechanical, Packaging, and Orderable Information ..... 31

## 4 Revision History

NOTE: Page numbers for previous revisions may differ from page numbers in the current version.
Changes from Revision E (October 2015) to Revision F Page

- Changed $\mathrm{V}_{\text {EN_BUCK }}$ in Buck Converter Characteristics From: MIN $=0.9 \mathrm{~V}$ and MAX $=1.55 \mathrm{~V}$ To: MIN $=1.11 \mathrm{~V}$ and MAX $=1.36 \mathrm{~V}$ ..... 10

Changes from Revision D (August 2015) to Revision E Page

- Corrected table note for dead time programming definition ..... 11
- Updated description of gate driver power-up sequencing errata ..... 24
- Fixed connections for pin 25 in Figure 7 ..... 25
Changes from Revision C (January 2015) to Revision D Page
- $\mathrm{V}_{\text {PVDD }}$ absolute max voltage rating reduced from 70 V to 65 V ..... 6
- Clarification made on how the OCP status bits report in Overcurrent Protection and Reporting (OCP) ..... 17
- Update to PVDD1 undervoltage protection in Undervoltage Protection (PVDD_UV and GVDD_UV) describing specific transient brownout issue. ..... 18
- Update to EN_GATE pin functional description in EN_GATE clarifying proper EN_GATE reset pulse lengths. ..... 20
- Added gate driver power-up sequencing errata ..... 24
- Added Community Resources ..... 31
Changes from Revision B (August 2013) to Revision C Page
- Added ESD Ratings table, Feature Description section, Device Functional Modes, Application and Implementation section, Power Supply Recommendations section, Layout section, Device and Documentation Support section, and Mechanical, Packaging, and Orderable Information section ..... 6

# Page 3

# 5 Pin Configuration and Functions 

![img-1.jpeg](img-1.jpeg)

Pin Functions

| PIN |  | TYPE $^{(1)}$ | DESCRIPTION |
| :--: | :--: | :--: | :--: |
| NAME | NO. |  |  |
| RT_CLK | 1 | I | Resistor timing and external clock for buck regulator. Resistor should connect to GND (PowerPAD ${ }^{\text {TM }}$ ) with very short trace to reduce the potential clock jitter due to noise. |
| COMP | 2 | 0 | Buck error amplifier output and input to the output switch current comparator. |
| VSENSE | 3 | I | Buck output voltage sense pin. Inverting node of error amplifier. |
| PWRGD | 4 | 0 | An open-drain output with external pullup resistor required. Asserts low if buck output voltage is low due to thermal shutdown, dropout, overvoltage, or EN_BUCK shut down |
| nOCTW | 5 | 0 | Overcurrent and/or overtemperature warning indicator. This output is open drain with external pullup resistor required. Programmable output mode via SPI registers. |
| nFAULT | 6 | 0 | Fault report indicator. This output is open drain with external pullup resistor required. |
| DTC | 7 | I | Dead-time adjustment with external resistor to GND |
| nSCS | 8 | I | SPI chip select |
| SDI | 9 | I | SPI input |
| SDO | 10 | 0 | SPI output |

(1) KEY: I =Input, $O=$ Output, $P=$ Power

# Page 4

# Pin Functions (continued) 

| PIN |  | TYPE ${ }^{(1)}$ | DESCRIPTION |
| :--: | :--: | :--: | :--: |
| NAME | NO. |  |  |
| SCLK | 11 | I | SPI clock signal |
| DC_CAL | 12 | I | When DC_CAL is high, device shorts inputs of shunt amplifiers and disconnects loads. DC offset calibration can be done through external microcontroller. |
| GVDD | 13 | $P$ | Internal gate driver voltage regulator. GVDD cap should connect to GND |
| CP1 | 14 | $P$ | Charge pump pin 1, ceramic capacitor should be used between CP1 and CP2 |
| CP2 | 15 | $P$ | Charge pump pin 2, ceramic capacitor should be used between CP1 and CP2 |
| EN_GATE | 16 | I | Enable gate driver and current shunt amplifiers. Control buck through EN_BUCK pin. |
| INH_A | 17 | I | PWM input signal (high side), half-bridge A |
| INL_A | 18 | I | PWM input signal (low side), half-bridge A |
| INH_B | 19 | I | PWM input signal (high side), half-bridge B |
| INL_B | 20 | I | PWM input signal (low side), half-bridge B |
| INH_C | 21 | I | PWM input signal (high side), half-bridge C |
| INL_C | 22 | I | PWM input signal (low side), half-bridge C |
| DVDD | 23 | $P$ | Internal 3.3-V supply voltage. DVDD cap should connect to AGND. This is an output, but not specified to drive external circuitry. |
| REF | 24 | I | Reference voltage to set output of shunt amplifiers with a bias voltage which equals to half of the voltage set on this pin. Connect to ADC reference in microcontroller. |
| SO1 | 25 | 0 | Output of current amplifier 1 |
| SO2 | 26 | 0 | Output of current amplifier 2 |
| AVDD | 27 | $P$ | Internal 6-V supply voltage, AVDD cap should always be installed and connected to AGND. This is an output, but not specified to drive external circuitry. |
| AGND | 28 | $P$ | Analog ground pin. Connect directly to GND (PowerPAD). |
| PVDD1 | 29 | $P$ | Power supply pin for gate driver, current shunt amplifier, and SPI communication. PVDD1 is independent of buck power supply, PVDD2. PVDD1 cap should connect to GND |
| SP2 | 30 | I | Input of current amplifier 2 (connecting to positive input of amplifier). Recommend to connect to ground side of the sense resistor for the best common mode rejection. |
| SN2 | 31 | I | Input of current amplifier 2 (connecting to negative input of amplifier). |
| SP1 | 32 | I | Input of current amplifier 1 (connecting to positive input of amplifier). Recommend to connect to ground side of the sense resistor for the best common mode rejection. |
| SN1 | 33 | I | Input of current amplifier 1 (connecting to negative input of amplifier). |
| SL_C | 34 | I | Low-Side MOSFET source connection, half-bridge C. Low-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and $\mathrm{SH}_{-} \mathrm{C}$. |
| GL_C | 35 | 0 | Gate drive output for low-side MOSFET, half-bridge C |
| SH_C | 36 | I | High-side MOSFET source connection, half-bridge C. High-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and PVDD1. |
| GH_C | 37 | 0 | Gate drive output for high-side MOSFET, half-bridge C |
| BST_C | 38 | $P$ | Bootstrap cap pin for half-bridge C |
| SL_B | 39 | I | Low-side MOSFET source connection, half-bridge B. Low-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and SH_B. |
| GL_B | 40 | 0 | Gate drive output for low-side MOSFET, half-bridge B |
| SH_B | 41 | I | High-side MOSFET source connection, half-bridge B. High-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and PVDD1. |
| GH_B | 42 | 0 | Gate drive output for high-side MOSFET, half-bridge B |
| BST_B | 43 | $P$ | Bootstrap cap pin for half-bridge B |
| SL_A | 44 | I | Low-side MOSFET source connection, half-bridge A. Low-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and SH_A. |
| GL_A | 45 | 0 | Gate drive output for low-side MOSFET, half-bridge A |
| SH_A | 46 | I | High-side MOSFET source connection, half-bridge A. High-side $\mathrm{V}_{\mathrm{DS}}$ measured between this pin and PVDD1. |
| GH_A | 47 | 0 | Gate drive output for high-side MOSFET, half-bridge A |

# Page 5

# Pin Functions (continued) 

| PIN |  | TYPE $^{(1)}$ | DESCRIPTION |
| :--: | :--: | :--: | :--: |
| NAME | NO. |  |  |
| BST_A | 48 | $P$ | Bootstrap cap pin for half-bridge A |
| VDD_SPI | 49 | I | SPI supply pin to support $3.3-\mathrm{V}$ or $5-\mathrm{V}$ logic. Connect to the same supply that the MCU uses for SPI operation. |
| PH | 50,51 | 0 | The source of the internal high side MOSFET of buck converter |
| BST_BK | 52 | $P$ | Bootstrap cap pin for buck converter |
| PVDD2 | 53, 54 | $P$ | Power supply pin for buck converter, PVDD2 cap should connect to GND. |
| EN_BUCK | 55 | I | Enable buck converter. Internal pullup current source. Pull below 1.2 V to disable. Float to enable. Adjust the input undervoltage lockout with two resistors |
| SS_TR | 56 | I | Buck soft-start and tracking. An external capacitor connected to this pin sets the output rise time. Because the voltage on this pin overrides the internal reference, it can be used for tracking and sequencing. Cap should connect to GND |
| GND <br> (PowerPAD) | 57 | $P$ | GND pin. The exposed power pad must be electrically connected to ground plane through soldering to PCB for proper operation and connected to bottom side of PCB through vias for better thermal spreading. |

# Page 6

# 6 Specifications 

### 6.1 Absolute Maximum Ratings

see ${ }^{(1)}$

|  |  |  | MIN | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: |
| $V_{\text {PVDD }}$ | Supply voltage | Relative to PGND | $-0.3$ | 65 | V |
|  | Maximum supply voltage ramp rate | Voltage rising up to PVDD $_{\text {MAX }}$ |  | 1 | $\mathrm{V} / \mu \mathrm{S}$ |
| $V_{\text {PGND }}$ | Maximum voltage between PGND and GND |  | $-0.3$ | 0.3 | V |
| $\mathrm{I}_{\text {IN_MAX }}$ | Maximum current for all digital and analog inputs (INH_A, INL_A, INH_B, INL_B, INH_C, INL_C, SCLK, SCS, SDI, EN_GATE, DC_CAL, DTC) |  | 1 | 1 | mA |
| $\mathrm{I}_{\text {SINK_MAX }}$ | Maximum sinking current for open-drain pins (nFAULT and nOCTW Pins) |  |  | 7 | mA |
| $V_{\text {OPA_IN }}$ | Voltage for SPx and SNx pins |  | $-0.6$ | 0.6 | V |
| $V_{\text {LOGIC }}$ | Input voltage range for logic/digital pins (INH_A, INL_A, INH_B, INL_B, INH_C, INL_C, EN_GATE, SCLK, SDI, SCS, DC_CAL) |  | $-0.3$ | 7 | V |
| $V_{\text {GVDD }}$ | Maximum voltage for GVDD pin |  |  | 13.2 | V |
| $V_{\text {AVDD }}$ | Maximum voltage for AVDD pin |  |  | 8 | V |
| $V_{\text {DVDD }}$ | Maximum voltage for DVDD pin |  |  | 3.6 | V |
| $V_{\text {VDD SPI }}$ | Maximum voltage for VDD_SPI pin |  |  | 7 | V |
| $V_{\text {SDO }}$ | Maximum voltage for SDO pin |  |  | VDD_SPI + 0.3 | V |
| $V_{\text {REF }}$ | Maximum reference voltage for current amplifier |  |  | 7 | V |
| $\mathrm{I}_{\text {REF }}$ | Maximum current for REF pin |  |  | 100 | $\mu \mathrm{A}$ |
| $T_{J}$ | Maximum operating junction temperature |  | $-40$ | 150 | ${ }^{\circ} \mathrm{C}$ |
| $T_{\text {stg }}$ | Storage temperature |  | $-55$ | 150 | ${ }^{\circ} \mathrm{C}$ |

(1) Stresses beyond those listed under Absolute Maximum Ratings may cause permanent damage to the device. These are stress ratings only, and functional operation of the device at these or any other conditions beyond those indicated under Recommended Operating Conditions is not implied. Exposure to absolute-maximum-rated conditions for extended periods may affect device reliability.

### 6.2 ESD Ratings

|  |  |  | VALUE | UNIT |
| :--: | :--: | :--: | :--: | :--: |
| $V_{(\text {ESD) }}$ | Electrostatic discharge | Human body model (HBM), per ANSI/ESDA/JEDEC JS-001, all pins ${ }^{(1)}$ | $\pm 2000$ | V |
|  |  | Charged device model (CDM), per JEDEC specification JESD22-C101, all pins ${ }^{(2)}$ | $\pm 500$ |  |

(1) JEDEC document JEP155 states that 500-V HBM allows safe manufacturing with a standard ESD control process.
(2) JEDEC document JEP157 states that 250-V CDM allows safe manufacturing with a standard ESD control process.

# Page 7

# 6.3 Recommended Operating Conditions 

|  |  |  | MIN | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: |
| $\mathrm{V}_{\text {PVDD1 }}$ | DC supply voltage PVDD1 for normal operation | Relative to PGND | 6 | 60 | V |
| $\mathrm{V}_{\text {PVDD2 }}$ | DC supply voltage PVDD2 for buck converter |  | 3.5 | 60 | V |
| $\mathrm{I}_{\text {DIN_EN }}$ | Input current of digital pins when EN_GATE is high |  |  | 100 | $\mu \mathrm{A}$ |
| $\mathrm{I}_{\text {DIN_DIS }}$ | Input current of digital pins when EN_GATE is low |  |  | 1 | $\mu \mathrm{A}$ |
| $\mathrm{C}_{\mathrm{O} \text { OPA }}$ | Maximum output capacitance on outputs of shunt amplifier |  |  | 20 | pF |
| $R_{D T C}$ | Dead time control resistor range. Time range is 50 ns (-GND) to 500 ns ( $150 \mathrm{k} \Omega$ ) with a linear approximation. |  | 0 | 150 | $\mathrm{k} \Omega$ |
| $\mathrm{I}_{\text {FAULT }}$ | nFAULT pin sink current, open-drain | $V=0.4 \mathrm{~V}$ |  | 2 | mA |
| $\mathrm{I}_{\text {OCTW }}$ | nFAULT pin sink current, open-drain | $V=0.4 \mathrm{~V}$ |  | 2 | mA |
| $\mathrm{V}_{\text {REF }}$ | External voltage reference voltage for current shunt amplifiers |  | 2 | 6 | V |
| $f_{\text {gate }}$ | Operating switching frequency of gate driver | $Q_{g(T O T)}=25 \mathrm{nC}$ or total $30-\mathrm{mA}$ gate drive average current |  | 200 | kHz |
| $\mathrm{I}_{\text {gate }}$ | Total average gate drive current |  |  | 30 | mA |
| $T_{A}$ | Ambient temperature |  | $-40$ | 125 | ${ }^{\circ} \mathrm{C}$ |

### 6.4 Thermal Information

| THERMAL METRIC ${ }^{(1)}$ |  | DRV8301 <br> DCA (HTSSOP) <br> 56 PINS | UNIT |
| :--: | :--: | :--: | :--: |
| $R_{B, U A}$ | Junction-to-ambient thermal resistance | 30.3 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |
| $R_{B, U C(\text { top) }}$ | Junction-to-case (top) thermal resistance | 33.5 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |
| $R_{B, I B}$ | Junction-to-board thermal resistance | 17.5 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |
| $\psi_{J T}$ | Junction-to-top characterization parameter | 0.9 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |
| $\psi_{J B}$ | Junction-to-board characterization parameter | 7.2 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |
| $R_{B, I C(b o t)}$ | Junction-to-case (bottom) thermal resistance | 0.9 | ${ }^{\circ} \mathrm{C} / \mathrm{W}$ |

(1) For more information about traditional and new thermal metrics, see the Semiconductor and IC Package Thermal Metrics application report, SPRA953.

# Page 8

# 6.5 Electrical Characteristics 

PVDD $=6$ to $60 \mathrm{~V}, \mathrm{~T}_{\mathrm{C}}=25^{\circ} \mathrm{C}$, unless specified under test condition

| PARAMETER |  | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| INPUT PINS: INH_X, INL_X, nSCS, SDI, SCLK, EN_GATE, DC_CAL |  |  |  |  |  |  |
| $\mathrm{V}_{\mathrm{IH}}$ | High input threshold |  | 2 |  |  | V |
| $\mathrm{V}_{\mathrm{I}}$, | Low input threshold |  |  |  | 0.8 | V |
| RPULL_DOWN - INTERNAL PULLDOWN RESISTOR FOR GATE DRIVER INPUTS |  |  |  |  |  |  |
| $R_{\text {EN_GATE }}$ | Internal pulldown resistor for EN_GATE |  |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{I N H, X}$ | Internal pulldown resistor for high-side PWMs (INH_A, INH_B, and INH_C) | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{I N H, X}$ | Internal pulldown resistor for low-side PWMs (INL_A, INL_B, and INL_C) | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{\text {nSCS }}$ | Internal pulldown resistor for nSCS | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{S D I}$ | Internal pulldown resistor for SDI | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{\text {DC_CAL }}$ | Internal pulldown resistor for DC_CAL | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| $R_{\text {SCLK }}$ | Internal pulldown resistor for SCLK | EN_GATE high |  | 100 |  | $\mathrm{k} \Omega$ |
| OUTPUT PINS: nFAULT AND nOCTW |  |  |  |  |  |  |
| $\mathrm{V}_{\mathrm{OL}}$ | Low output threshold | $\mathrm{I}_{\mathrm{O}}=2 \mathrm{~mA}$ |  |  | 0.4 | V |
| $\mathrm{V}_{\mathrm{OH}}$ | High output threshold | External $47 \mathrm{k} \Omega$ pullup resistor connected to $3-5.5 \mathrm{~V}$ | 2.4 |  |  | V |
| $\mathrm{I}_{\mathrm{OH}}$ | Leakage Current on Open-Drain Pins When Logic High nFAULT and nOCTW) |  |  |  | 1 | $\mu \mathrm{A}$ |
| GATE DRIVE OUTPUT: GH_A, GH_B, GH_C, GL_A, GL_B, GL_C |  |  |  |  |  |  |
| $\mathrm{V}_{\text {GX_NORM }}$ | Gate driver Vgs voltage | PVDD $=8$ to $60 \mathrm{~V}, \mathrm{I}_{\text {gate }}=30 \mathrm{~mA}$, $\mathrm{C}_{\mathrm{CP}}=22 \mathrm{nF}$ | 9.5 |  | 11.5 | V |
|  |  | PVDD $=8$ to $60 \mathrm{~V}, \mathrm{I}_{\text {gate }}=30 \mathrm{~mA}$, $\mathrm{C}_{\mathrm{CP}}=220 \mathrm{nF}$ | 9.5 |  | 11.5 |  |
| $\mathrm{V}_{\text {GX_MIN }}$ | Gate driver Vgs voltage | PVDD $=6$ to $8 \mathrm{~V}, \mathrm{I}_{\text {gate }}=15 \mathrm{~mA}$, $\mathrm{C}_{\mathrm{CP}}=22 \mathrm{nF}$ | 8.8 |  |  | V |
|  |  | PVDD $=6$ to $8 \mathrm{~V}, \mathrm{I}_{\text {gate }}=30 \mathrm{~mA}$, $\mathrm{C}_{\mathrm{CP}}=220 \mathrm{nF}$ | 8.3 |  |  |  |
| $\mathrm{I}_{\text {oso1 }}$ | Maximum source current setting 1, peak | Vgs of FET equals to 2 V . REG 0x02 |  | 1.7 |  | A |
| $\mathrm{I}_{\text {osi1 }}$ | Maximum sink current setting 1, peak | Vgs of FET equals to 8 V . REG 0x02 |  | 2.3 |  | A |
| $\mathrm{I}_{\text {oso2 }}$ | Source current setting 2, peak | Vgs of FET equals to 2 V . REG 0x02 |  | 0.7 |  | A |
| $\mathrm{I}_{\text {osi2 }}$ | Sink current setting 2, peak | Vgs of FET equals to 8 V . REG 0x02 |  | 1 |  | A |
| $\mathrm{I}_{\text {oso3 }}$ | Source current setting 3, peak | Vgs of FET equals to 2 V . REG 0x02 |  | 0.25 |  | A |
| $\mathrm{I}_{\text {osi3 }}$ | Sink current setting 3, peak | Vgs of FET equals to 8 V . REG 0x02 |  | 0.5 |  | A |
| $\mathrm{R}_{\text {gate_off }}$ | Gate output impedence during standby mode when EN_GATE low (pins GH_x, GL_x) |  | 1.6 |  | 2.4 | $\mathrm{k} \Omega$ |
| SUPPLY CURRENTS |  |  |  |  |  |  |
| $\mathrm{I}_{\text {PVDD1_STB }}$ | PVDD1 supply current, standby | EN_GATE is low. PVDD1 $=8 \mathrm{~V}$. |  | 20 | 50 | $\mu \mathrm{A}$ |
| $\mathrm{I}_{\text {PVDD1_OP }}$ | PVDD1 supply current, operating | EN_GATE is high, no load on gate drive output, switching at 10 kHz , 100 nC gate charge |  | 15 |  | mA |
| $\mathrm{I}_{\text {PVDD1_HIZ }}$ | PVDD1 Supply current, Hi-Z | EN_GATE is high, gate not switching | 2 | 5 | 10 | mA |
| INTERNAL REGULATOR VOLTAGE |  |  |  |  |  |  |
| $\mathrm{A}_{\text {VDD }}$ | AVDD voltage | PVDD $=8$ to 60 V | 6 | 6.5 | 7 | V |
|  |  | PVDD $=6$ to 60 V | 5.5 |  | 6 |  |
| $D_{V D D}$ | DVDD voltage |  | 3 | 3.3 | 3.6 | V |
| VOLTAGE PROTECTION |  |  |  |  |  |  |
| $\mathrm{V}_{\text {PVDD_UV }}$ | Undervoltage protection limit, PVDD | PVDD falling |  |  | 5.9 | V |
|  |  | PVDD rising |  |  | 6 |  |
| $\mathrm{V}_{\text {GVDD_UV }}$ | Undervoltage protection limit, GVDD | GVDD falling |  |  | 8 | V |

# Page 9

# Electrical Characteristics (continued) 

PVDD $=6$ to $60 \mathrm{~V}, \mathrm{~T}_{\mathrm{C}}=25^{\circ} \mathrm{C}$, unless specified under test condition

| PARAMETER |  | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| $\mathrm{V}_{\text {GVDD_OV }}$ | Overvoltage protection limit, GVDD |  |  | 16 |  | V |
| CURRENT PROTECTION, (VDS SENSING) |  |  |  |  |  |  |
| $\mathrm{V}_{\text {DS_OC }}$ | Drain-source voltage protection limit | PVDD $=8$ to 60 V | 0.125 |  | 2.4 | V |
|  |  | PVDD $=6$ to $8 \mathrm{~V}^{(1)}$ | 0.125 |  | 1.491 |  |
| $\mathrm{T}_{\text {oc }}$ | OC sensing response time |  |  | 1.5 |  | $\mu \mathrm{s}$ |
| $\mathrm{T}_{\text {OC_PULSE }}$ | nOCTW pin reporting pulse stretch length for OC event |  |  | 64 |  | $\mu \mathrm{s}$ |
| TEMPERATURE PROTECTION |  |  |  |  |  |  |
| OTW_CLR | Junction temperature for resetting overtemperature warning |  |  | 115 |  | ${ }^{\circ} \mathrm{C}$ |
| OTW_SET/O <br> TSD_CLR | Junction temperature for overtemperature warning and resetting over temperature shut down |  |  | 130 |  | ${ }^{\circ} \mathrm{C}$ |
| OTSD_SET | Junction temperature for overtemperature shut down |  |  | 150 |  | ${ }^{\circ} \mathrm{C}$ |

(1) Reduced $A_{\text {VDD }}$ voltage range results in limitations on settings for overcurrent protection. See Table 13.

### 6.6 Current Shunt Amplifier Characteristics

$T_{C}=25^{\circ} \mathrm{C}$ unless otherwise specified

| PARAMETER |  | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| G1 | Gain option 1 | $\mathrm{T}_{\mathrm{C}}=-40^{\circ} \mathrm{C}$ to $125^{\circ} \mathrm{C}$ | 9.5 | 10 | 10.5 | V/V |
| G2 | Gain option 2 | $\mathrm{T}_{\mathrm{C}}=-40^{\circ} \mathrm{C}$ to $125^{\circ} \mathrm{C}$ | 18 | 20 | 21 | V/V |
| G3 | Gain Option 3 | $\mathrm{T}_{\mathrm{C}}=-40^{\circ} \mathrm{C}$ to $125^{\circ} \mathrm{C}$ | 38 | 40 | 42 | V/V |
| G4 | Gain Option 4 | $\mathrm{T}_{\mathrm{C}}=-40^{\circ} \mathrm{C}$ to $125^{\circ} \mathrm{C}$ | 75 | 80 | 85 | V/V |
| $t_{\text {settling }}$ | Settling time to $1 \%$ | $\mathrm{T}_{\mathrm{C}}=0$ to $60^{\circ} \mathrm{C}, \mathrm{G}=10$, Vstep $=2 \mathrm{~V}$ |  | 300 |  | ns |
| $t_{\text {settling }}$ | Settling time to $1 \%$ | $\mathrm{T}_{\mathrm{C}}=0$ to $60^{\circ} \mathrm{C}, \mathrm{G}=20$, Vstep $=2 \mathrm{~V}$ |  | 600 |  | ns |
| $t_{\text {settling }}$ | Settling time to $1 \%$ | $\mathrm{T}_{\mathrm{C}}=0$ to $60^{\circ} \mathrm{C}, \mathrm{G}=40$, Vstep $=2 \mathrm{~V}$ |  | 1.2 |  | $\mu \mathrm{s}$ |
| $t_{\text {settling }}$ | Settling time to $1 \%$ | $\mathrm{T}_{\mathrm{C}}=0$ to $60^{\circ} \mathrm{C}, \mathrm{G}=80$, Vstep $=2 \mathrm{~V}$ |  | 2.4 |  | $\mu \mathrm{s}$ |
| $V_{\text {swing }}$ | Output swing linear range |  | 0.3 |  | 5.7 | V |
| Slew rate |  | $G=10$ |  | 10 |  | $\mathrm{V} / \mu \mathrm{s}$ |
| DC_offset | Offset error RTI | $G=10$ with input shorted |  |  | 4 | mV |
| Drift_offset | Offset drift RTI |  |  | 10 |  | $\mu \mathrm{V} / \mathrm{C}$ |
| $\mathrm{I}_{\text {bias }}$ | Input bias current |  |  |  | 100 | $\mu \mathrm{A}$ |
| $V_{\text {in_com }}$ | Common input mode range |  | $-0.15$ |  | 0.15 | V |
| $V_{\text {in_diff }}$ | Differential input range |  | $-0.3$ |  | 0.3 | V |
| $V_{0 \text { _bias }}$ | Output bias | With zero input current, Vref up to 6 V | $-0.5 \%$ | $\begin{gathered} 0.5 \times \\ \text { Vref } \end{gathered}$ | $0.5 \%$ | V |
| CMRR_OV | Overall CMRR with gain resistor mismatch | CMRR at DC, gain $=10$ | 70 | 85 |  | dB |

# Page 10

# 6.7 Buck Converter Characteristics 

$\mathrm{T}_{\mathrm{C}}=25^{\circ} \mathrm{C}$ unless otherwise specified

| PARAMETER |  | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| $\mathrm{V}_{\text {UVLO }}$ | Internal undervoltage lockout threshold | No voltage hysteresis, rising and falling |  | 2.5 |  | V |
| $\mathrm{I}_{\text {SD(PVDD2) }}$ | Shutdown supply current | $\mathrm{EN}=0 \mathrm{~V}, 25^{\circ} \mathrm{C}, 3.5 \mathrm{~V} \leq \mathrm{VIN} \leq 60 \mathrm{~V}$ |  | 1.3 | 4 | $\mu \mathrm{A}$ |
| $\mathrm{I}_{\text {NON_SW(PVDD2) }}$ | Operating: nonswitching supply current | VSENSE $=0.83 \mathrm{~V}, \mathrm{VIN}=12 \mathrm{~V}$ |  | 116 | 136 | $\mu \mathrm{A}$ |
| $\mathrm{V}_{\text {EN_BUCK }}$ | Enable threshold voltage | No voltage hysteresis, rising and falling | 1.11 | 1.25 | 1.36 | V |
| $R_{\text {DS_ON }}$ | On-resistance | VIN $=3.5 \mathrm{~V}, \mathrm{BOOT}-\mathrm{PH}=3 \mathrm{~V}$ |  | 300 |  | $\mathrm{m} \Omega$ |
| $\mathrm{I}_{\text {LIM }}$ | Current limit threshold | VIN $=12 \mathrm{~V}, \mathrm{~T}_{\mathrm{J}}=25^{\circ} \mathrm{C}$ | 1.8 | 2.7 |  | A |
| OTSD_BK | Thermal shutdown |  |  | 182 |  | ${ }^{\circ} \mathrm{C}$ |
| $\mathrm{F}_{\text {sw }}$ | Switching frequency | $\mathrm{RT}=200 \mathrm{k} \Omega$ | 450 | 581 | 720 | kHz |
| PWRGD | VSENSE threshold | VSENSE falling | $92 \%$ |  |  |  |
|  |  | VSENSE rising | $94 \%$ |  |  |  |
|  |  | VSENSE rising | $109 \%$ |  |  |  |
|  |  | VSENSE falling | $107 \%$ |  |  |  |
|  | Hysteresis | VSENSE falling | $2 \%$ |  |  |  |
|  | Output high leakage | $\begin{aligned} & \text { VSENSE }=\text { VREF, V(PWRGD) }=5.5 \mathrm{~V}, \\ & 25^{\circ} \mathrm{C} \end{aligned}$ | 10 |  |  | nA |
|  | On resistance | $\mathrm{I}(\mathrm{PWRGD})=3 \mathrm{~mA}, \mathrm{VSENSE}<0.79 \mathrm{~V}$ | 50 |  |  | $\Omega$ |

### 6.8 SPI Timing Requirements (Slave Mode Only)

| PARAMETER |  | TEST CONDITIONS | MIN | NOM | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| $\mathrm{t}_{\text {SPI_READY }}$ | SPI ready after EN_GATE transitions to HIGH | PVDD $>6 \mathrm{~V}$ |  | 5 | 10 | ms |
| $t_{\text {CLK }}$ | Minimum SPI clock period |  | 100 |  |  | ns |
| $t_{\text {CLKH }}$ | Clock high time | See Figure 1 | 40 |  |  |  |
| $t_{\text {CLKL }}$ | Clock low time | See Figure 1 | 40 |  |  |  |
| $t_{\text {SU_SDI }}$ | SDI input data setup time |  | 20 |  |  | ns |
| $t_{\text {HD_SDI }}$ | SDI input data hold time |  | 30 |  |  | ns |
| $t_{D \_S D O}$ | SDO output data delay time, CLK high to SDO valid | $C_{L}=20 \mathrm{pF}$ |  |  | 20 | ns |
| $t_{\text {HD_SDO }}$ | SDO output data hold time | See Figure 1 | 40 |  |  |  |
| $t_{\text {SU_SCS }}$ | SCS setup time | See Figure 1 | 50 |  |  | ns |
| $t_{\text {HD_SCS }}$ | SCS hold time |  | 50 |  |  | ns |
| $t_{\text {HI_SCS }}$ | SCS minimum high time before SCS active low |  | 40 |  |  | ns |
| $t_{\text {ACC }}$ | SCS access time, SCS low to SDO out of high impedance |  |  | 10 |  | ns |
| $t_{\text {DIS }}$ | SCS disable time, SCS high to SDO high impedance |  |  | 10 |  | ns |

# Page 11

# 6.9 Gate Timing and Protection Switching Characteristics 

over operating free-air temperature range (unless otherwise noted)

| PARAMETER |  | TEST CONDITIONS | MIN | TYP | MAX | UNIT |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| TIMING, OUTPUT PINS |  |  |  |  |  |  |
| $t_{\text {pd,II-O }}$ | Positive input falling to $\mathrm{GH}_{-} \mathrm{x}$ falling | $\mathrm{CL}=1 \mathrm{nF}, 50 \%$ to $50 \%$ |  | 45 |  | ns |
| $t_{\text {pd,II-O }}$ | Positive input rising to GL_x falling | $\mathrm{CL}=1 \mathrm{nF}, 50 \%$ to $50 \%$ |  | 45 |  | ns |
| $t_{\text {d_min }}$ | Minimum dead time after hand shaking ${ }^{(1)}$ |  |  |  | 50 | ns |
| $t_{\text {dlp }}$ | Dead time | With $\mathrm{R}_{\mathrm{DTC}}$ set to different values | 50 |  | 500 | ns |
| $t_{\text {GDr }}$ | Rise time, gate drive output | $\mathrm{CL}=1 \mathrm{nF}, 10 \%$ to $90 \%$ |  | 25 |  | ns |
| $t_{\text {GDF }}$ | Fall time, gate drive output | $\mathrm{CL}=1 \mathrm{nF}, 90 \%$ to $10 \%$ |  | 25 |  | ns |
| $t_{\text {ON_MIN }}$ | Minimum on pulse | Not including handshake communication. Hi-Z to on state, output of gate driver |  |  | 50 | ns |
| $t_{\text {pd_match }}$ | Propagation delay matching between high side and low side |  |  |  | 5 | ns |
| $t_{\text {dl_match }}$ | Deadtime matching |  |  |  | 5 | ns |
| TIMING, PROTECTION, AND CONTROL |  |  |  |  |  |  |
| $t_{\text {pd,R_GATE-OP }}$ | Start-up time, from EN_GATE active high to device ready for normal operation | PVDD is up before start-up, all charge pump caps and regulator caps as in recommended condition |  | 5 | 10 | ms |
| $t_{\text {pd,R_GATE-Quick }}$ | If EN_GATE goes from high to low and back to high state within quick reset time, it will only reset all faults and gate driver without powering down charge pump, current amp, and related internal voltage regulators. | Maximum low pulse time |  |  | 10 | $\mu \mathrm{s}$ |
| $t_{\text {pd,EL}}$ | Delay, error event to all gates low |  | 200 |  |  | ns |
| $t_{\text {pd,E-FAULT }}$ | Delay, error event to nFAULT low |  | 200 |  |  | ns |

(1) Dead time programming definition: Adjustable delay from $\mathrm{GH}_{-} \mathrm{X}$ falling edge to $\mathrm{GL}_{-} \mathrm{X}$ rising edge, and $\mathrm{GL}_{-} \mathrm{X}$ falling edge to $\mathrm{GH}_{-} \mathrm{X}$ rising edge. In 6-PWM input mode, this adjustable value is added to the timing delay between inputs as set by the microcontroller externally.
![img-2.jpeg](img-2.jpeg)

Figure 1. SPI Slave Mode Timing Definition

# Page 12

![img-3.jpeg](img-3.jpeg)

Figure 2. SPI Slave Mode Timing Diagram

# 6.10 Typical Characteristics 

![img-4.jpeg](img-4.jpeg)

# Page 13

# 7 Detailed Description 

### 7.1 Overview

The DRV8301 is a 6-V to 60-V gate driver IC for three-phase motor drive applications. This device reduces external component count by integrating three half-bridge drivers, two current shunt amplifiers, and a switching buck converter. The DRV8301 provides overcurrent, overtemperature, and undervoltage protection. Fault conditions are indicated through the nFAULT and nOCTW pins in addition to the SPI registers.
Adjustable dead time control and peak gate drive current allows for finely tuning the switching of the external MOSFETs. Internal hand-shaking is used to prevent flow of current.
VDS sensing of the external MOSFETs allows for the DRV8301 to detect overcurrent conditions and respond appropriately. Individual MOSFET overcurrent conditions are reported through the SPI status registers.
The highly configurable buck converter can support a wide range of output options. This allows the DRV8301 to provide a power supply rail for the controller and lower voltage components.

# Page 14

# 7.2 Functional Block Diagram 

![img-5.jpeg](img-5.jpeg)

# Page 15

# 7.3 Feature Description 

### 7.3.1 Three-Phase Gate Driver

The half-bridge drivers use a bootstrap configuration with a trickle charge pump to support 100\% duty cycle operation. Each half-bridge is configured to drive two N-channel MOSFETs, one for the high-side and one for the low-side. The half-bridge drivers can be used in combination to drive a 3-phase motor or separately to drive various other loads.

The peak gate drive current and internal dead times are adjustable to accommodate a variety of external MOSFETs and applications. The peak gate drive current is set through a register setting and the dead time is adjusted with an external resistor on the DTC pin. Shorting the DTC pin to ground will provide the minimum dead time (50ns). There is an internal hand shake between the high side and low side MOSFETs during switching transitions to prevent current shoot through.
The three-phase gate driver can provide up to 30 mA of average gate drive current. This will support switching frequencies up to 200 kHz when the MOSFET Qg $=25 \mathrm{nC}$.
Each MOSFET gate driver has a VDS sensing circuit for overcurrent protection. The sense circuit measures the voltage from the drain to the source of the external MOSFETs while the MOSFET is enabled. This voltage is compared against the programmed trip point to determine if an overcurrent event has occurred. The high-side sense is between the PVDD1 and SH_X pins. The low-side sense is between the SH_X and SL_X pins. Ensuring a differential, low impedance connection to the external MOSFETs for these lines will help provide accurate VDS sensing.
The DRV8301 allows for both 6-PWM and 3-PWM control through a register setting.
Table 1. 6-PWM Mode

| INL_X | INH_X | GL_X | GH_X |
| :--: | :--: | :--: | :--: |
| 0 | 0 | L | L |
| 0 | 1 | L | H |
| 1 | 0 | H | L |
| 1 | 1 | L | L |

Table 2. 3-PWM Mode

| INL_X | INH_X | GL_X | GH_X |
| :--: | :--: | :--: | :--: |
| X | 0 | H | L |
| X | 1 | L | H |

Table 3. Gate Driver External Components

| NAME | PIN 1 | PIN 2 | RECOMMENDED |
| :--: | :--: | :--: | :--: |
| $\mathrm{R}_{\text {nOCTW }}$ | nOCTW | $\mathrm{V}_{\mathrm{CC}}{ }^{(1)}$ | $\geq 10 \mathrm{k} \Omega$ |
| $\mathrm{R}_{\text {nFAULT }}$ | nFAULT | $\mathrm{V}_{\mathrm{CC}}{ }^{(1)}$ | $\geq 10 \mathrm{k} \Omega$ |
| $R_{\text {DTC }}$ | DTC | GND (PowerPAD) | 0 to $150 \mathrm{k} \Omega$ ( 50 ns to 500 ns) |
| $\mathrm{C}_{\text {GVDD }}$ | GVDD | GND (PowerPAD) | $2.2 \mu \mathrm{~F}(20 \%)$ ceramic, $\geq 16 \mathrm{~V}$ |
| $\mathrm{C}_{\mathrm{CP}}$ | CP1 | CP2 | $0.022 \mu \mathrm{~F}(20 \%)$ ceramic, rated for PVDD1 |
| $\mathrm{C}_{\text {DVDD }}$ | DVDD | AGND | $1 \mu \mathrm{~F}(20 \%)$ ceramic, $\geq 6.3 \mathrm{~V}$ |
| $\mathrm{C}_{\text {AVDD }}$ | AVDD | AGND | $1 \mu \mathrm{~F}(20 \%)$ ceramic, $\geq 10 \mathrm{~V}$ |
| $\mathrm{C}_{\text {PVDD1 }}$ | PVDD1 | GND (PowerPAD) | $\geq 4.7 \mu \mathrm{~F}(20 \%)$ ceramic, rated for PVDD1 |
| $\mathrm{C}_{\text {BST_X }}$ | BST_X | SH_X | $0.1 \mu \mathrm{~F}(20 \%)$ ceramic, $\geq 16 \mathrm{~V}$ |

(1) $\mathrm{V}_{\mathrm{CC}}$ is the logic supply to the MCU

# Page 16

# 7.3.2 Current Shunt Amplifiers 

The DRV8301 includes two high-performance current shunt amplifiers to accurate low-side, inline current measurement.

The current shunt amplifiers have four programmable GAIN settings through the SPI registers. These are 10, 20, 40 , and $80 \mathrm{~V} / \mathrm{V}$.
The current shunt amplifiers provide output offset up to 3 V to support bidirectional current sensing. The offset is set to half the voltage on the reference pin (REF).
To minimize DC offset and drift overtemperature, a calibration method is provided through either the DC_CAL pin or SPI register. When DC calibration is enabled, the device will short the input of the current shunt amplifier and disconnect the load. DC calibration can be done at any time, even during MOSFET switching, because the load is disconnected. For the best results, perform the DC calibration during the switching OFF period, when no load is present, to reduce the potential noise impact to the amplifier.
The output of the current shunt amplifier can be calculated as:

$$
\mathrm{V}_{\mathrm{O}}=\frac{\mathrm{V}_{\mathrm{REF}}}{2}-\mathrm{G} \times\left(\mathrm{SN}_{\mathrm{X}}-\mathrm{SP}_{\mathrm{X}}\right)
$$

where

- $\mathrm{V}_{\text {REF }}$ is the reference voltage (REF pin)
- G is the gain of the amplifier (10, 20, 40, or $80 \mathrm{~V} / \mathrm{V}$ )
- $\mathrm{SN}_{\mathrm{X}}$ and $\mathrm{SP}_{\mathrm{X}}$ are the inputs of channel $\mathrm{x} . \mathrm{SP}_{\mathrm{X}}$ should connect to the ground side of the sense resistor for the best common mode rejection.
Figure 6 shows the current shunt amplifier simplified block diagram.
![img-6.jpeg](img-6.jpeg)

Figure 6. Current Shunt Amplifier Simplified Block Diagram

# Page 17

# 7.3.3 Buck Converter 

Table 4. Buck Regulator External Components

| NAME | PIN 1 | PIN 2 | RECOMMENDED |
| :--: | :--: | :--: | :--: |
| $\mathrm{R}_{\text {RT_CLK }}$ | RT_CLK | GND (PowerPAD) | See Buck Converter |
| $\mathrm{C}_{\text {COMP }}$ | COMP | GND (PowerPAD) | See Buck Converter |
| $\mathrm{RC}_{\text {COMP }}$ | COMP | GND (PowerPAD) | See Buck Converter |
| $\mathrm{R}_{\text {VSENSE1 }}$ | PH (Filtered) | VSENSE | See Buck Converter |
| $\mathrm{R}_{\text {VSENSE2 }}$ | VSENSE | GND (PowerPAD) | See Buck Converter |
| $\mathrm{R}_{\text {PWRGD }}$ | PWRGD | $\mathrm{V}_{\mathrm{CC}}{ }^{(1)}$ | $\geq 10 \mathrm{k} \Omega$ |
| $\mathrm{L}_{\text {PH }}$ | PH | PH (Filtered) | See Buck Converter |
| $\mathrm{D}_{\text {PH }}$ | PH | GND (PowerPAD) | See Buck Converter |
| $\mathrm{C}_{\text {PH }}$ | PH (Filtered) | GND (PowerPAD) | See Buck Converter |
| $\mathrm{C}_{\text {BST_BK }}$ | BST_BK | PH | See Buck Converter |
| $\mathrm{C}_{\text {PVDD2 }}$ | PVDD2 | GND (PowerPAD) | $\geq 4.7 \mu \mathrm{~F}$ (20\%) ceramic, rated for PVDD2 |
| $\mathrm{C}_{\text {SS_TR }}$ | SS_TR | GND (PowerPAD) | See Buck Converter |

(1) $\mathrm{V}_{\mathrm{CC}}$ is the logic supply to the MCU

### 7.3.4 Protection Features

### 7.3.4.1 Overcurrent Protection and Reporting (OCP)

To protect the power stage from damage due to excessive currents, $\mathrm{V}_{\mathrm{DS}}$ sensing circuitry is implemented in the DRV8301. Based on the $\mathrm{R}_{\mathrm{DS}(\text { on) }}$ of the external MOSFETs and the maximum allowed $\mathrm{I}_{\mathrm{DS}}$, a voltage threshold can be determined to trigger the overcurrent protection features when exceeded. The voltage threshold is programmed through the SPI registers. Overcurrent protection should be used as a protection scheme only; it is not intended as a precise current regulation scheme. There can be up to a $20 \%$ tolerance across channels for the $\mathrm{V}_{\mathrm{DS}}$ trip point.

$$
\mathrm{V}_{\mathrm{DS}}=\mathrm{I}_{\mathrm{DS}} \times \mathrm{R}_{\mathrm{DS}(\text { on) }}
$$

The $\mathrm{V}_{\mathrm{DS}}$ sense circuit measures the voltage from the drain to the source of the external MOSFET while the MOSFET is enabled. The high-side sense is between the PVDD1 and SH_X pins. The low-side sense is between the SH_X and SL_X pins. Ensuring a differential, low impedance connection to the external MOSFETs for these lines will help provide accurate VDS sensing.
Four different overcurrent modes (OC_MODE) can be set through the SPI registers. The OC status bits operate in latched mode. When an overcurrent condition occurs the corresponding OC status bit will latch in the DRV8301 registers until the next SPI read command. After the read command the OC status bit will clear from the register until another overcurrent condition occurs.

1. Current limit mode

In current limit mode the device uses current limiting instead of device shutdown during an overcurrent event. In this mode the device reports overcurrent events through the nOCTW pin. The nOCTW pin will be held low for a maximum $64-\mu \mathrm{s}$ period (internal timer) or until the next PWM cycle. If another overcurrent event is triggered from another MOSFET, during a previous overcurrent event, the reporting will continue for another $64-\mu \mathrm{s}$ period (internal timer will restart) or until both PWM signals cycle. The associated status bit will be asserted for the MOSFET in which the overcurrent was detected.
There are two current control settings in current limit mode. These are set by one bit in the SPI registers. The default mode is cycle by cycle (CBC).

- Cycle by cycle mode (CBC): In CBC mode, the MOSFET on which overcurrent has been detected on will shut off until the next PWM cycle.
- Off-Time Control Mode: In Off-Time mode, the MOSFET in which overcurrent has been detected is disabled for a $64-\mu \mathrm{s}$ period (set by internal timer). If overcurrent is detected in another MOSFET, the timer will be reset for another $64-\mu \mathrm{s}$ period and both MOSFETs will be disabled for the duration. During this period, normal operation can be restored for a specific MOSFET with a corresponding PWM cycle.

2. OC latch shut down mode

# Page 18

When an overcurrent event occurs, both the high-side and low-side MOSFETs will be disabled in the corresponding half-bridge. The nFAULT pin and nFAULT status bits will be asserted along with the associated status bit for the MOSFET in which the overcurrent was detected. The OC status bit will latch until the next SPI read command. The nFAULT pin and nFAULT status bit will latch until a reset is received through the GATE_RESET bit or a quick EN_GATE reset pulse.
3. Report only mode

No protective action will be taken in this mode when an overcurrent event occurs. The overcurrent event will be reported through the nOCTW pin ( $64-\mu \mathrm{s}$ pulse) and SPI status register. The external MCU should take action based on its own control algorithm.
4. OC disabled mode

The device will ignore and not report all overcurrent detections.

# 7.3.4.2 Undervoltage Protection (PVDD_UV and GVDD_UV) 

To protect the power output stage during start-up, shutdown, and other possible undervoltage conditions, the DRV8301 provides undervoltage protection by driving the gate drive outputs (GH_X, GL_X) low whenever PVDD or GVDD are below their undervoltage thresholds (PVDD_UV/GVDD_UV). This will put the external MOSFETs in a high impedance state. When the device is in PVDD_UV it will not respond to SPI commands and the SPI registers will revert to their default settings.
A specific PVDD1 undervoltage transient brownout from $13 \mu \mathrm{~s}$ to $15 \mu \mathrm{~s}$ can cause the DRV8301 to become unresponsive to external inputs until a full power cycle. The transient condition consists of having PVDD1 greater than the PVDD_UV level and then PVDD1 dropping below the PVDD_UV level for a specific period of $13 \mu \mathrm{~s}$ to $15 \mu \mathrm{~s}$. Transients shorter or longer than 13 to $15 \mu \mathrm{~s}$ will not affect the normal operation of the undervoltage protection. Additional bulk capacitance can be added to PVDD1 to reduce undervoltage transients.

### 7.3.4.3 Overvoltage Protection (GVDD_OV)

The device will shut down both the gate driver and charge pump if the GVDD voltage exceeds the GVDD_OV threshold to prevent potential issues related to the GVDD pin or the charge pump (e.g. short of external GVDD cap or charge pump). The fault is a latched fault and can only be reset through a reset transition on the EN_GATE pin.

### 7.3.4.4 Overtemperature Protection

A two-level overtemperature detection circuit is implemented:

- Level 1: Overtemperature warning (OTW)

OTW is reported through the nOCTW pin (overcurrent and/or overtemperature warning) for default settings. OCTW pin can be set to report OTW or OCW only through the SPI registers. See SPI Register section.

- Level 2: Over Temperature Latched Shut Down of Gate Driver and Charge Pump (OTSD_GATE)

OTSD_GATE is reported through the nFAULT pin. This is a latched shut down, so the gate driver will not recover automatically, even if the overtemperature condition is not present anymore. An EN_GATE reset or SPI (RESET_GATE) is required to recover the gate driver to normal operation after the temperature goes below a preset value, $\mathrm{t}_{\text {OTSD_CLR }}$.
SPI operation is still available and register settings will be remaining in the device during OTSD operation as long as PVDD1 is within the defined operation range.

### 7.3.4.5 Fault and Protection Handling

The nFAULT pin indicates when a shutdown event has occurred. These events include overcurrent, overtemperature, overvoltage, or undervoltage. Note that nFAULT is an open-drain signal. nFAULT will go high when the gate driver is ready for PWM inputs during start-up.
The nOCTW pin indicates when a overcurrent event or over temperature event has occurred. These events are not necessary related to a shutdown.
Table 5 provides a summary of all the protection features and their reporting structure.

# Page 19

Table 5. Fault and Warning Reporting and Handling

| EVENT | ACTION | LATCH | REPORTING ON nFAULT PIN | REPORTING ON nOCTW PIN | REPORTING IN SPI STATUS REGISTER |
| :--: | :--: | :--: | :--: | :--: | :--: |
| PVDD undervoltage | External FETs Hi-Z; <br> Weak pulldown of all gate driver output | N | $Y$ | N | $Y$ |
| DVDD undervoltage | External FETs Hi-Z; <br> Weak pulldown of all gate driver output; When recovering, reset all status registers | N | $Y$ | N | N |
| GVDD undervoltage | External FETs Hi-Z; <br> Weak pulldown of all gate driver output | N | $Y$ | N | $Y$ |
| GVDD overvoltage | External FETs Hi-Z; <br> Weak pull down of all gate driver output <br> Shut down the charge pump <br> Won't recover and reset through SPI reset command or quick EN_GATE toggling | $Y$ | $Y$ | N | $Y$ |
| OTW | None | N | N | Y (in default setting) | $Y$ |
| OTSD_GATE | Gate driver latched shut down. Weak pulldown of all gate driver output to force external FETs Hi-Z Shut down the charge pump | $Y$ | $Y$ | $Y$ | $Y$ |
| OTSD_BUCK | OTSD of Buck | $Y$ | N | N | N |
| Buck output undervoltage | UVLO_BUCK: auto-restart | N | Y (PWRGD pin) | N | N |
| Buck overload | Buck current limiting (Hi-Z high side until current reaches zero and then auto-recovering) | N | N | N | N |
| External FET overload - current limit mode | External FETs current Limiting (only OC detected FET) | N | N | $Y$ | $Y$ |
| External FET overload - Latch mode | Weak pulldown of gate driver output and PWM logic " 0 " of LS and HS in the same phase. External FETs Hi-Z | $Y$ | $Y$ | $Y$ | $Y$ |
| External FET overload reporting only mode | Reporting only | N | N | $Y$ | $Y$ |

# 7.3.5 Start-up and Shutdown Sequence Control 

During power up all gate drive outputs are held low. Normal operation of gate driver and current shunt amplifiers can be initiated by toggling EN_GATE from a low state to a high state. If no errors are present, the DRV8301 is ready to accept PWM inputs. Gate driver always has control of the power FETs even in gate disable mode as long as PVDD is within functional region.
There is an internal diode from SDO to VDD_SPI, so VDD_SPI is required to be powered to the same power level as other SPI devices (if there is any SDO signal from other devices) all the time. VDD_SPI supply should be powered up first before any signal appears at SDO pin and powered down after completing all communications at SDO pin.

# Page 20

# 7.4 Device Functional Modes 

### 7.4.1 EN_GATE

EN_GATE low is used to put gate driver, charge pump, current shunt amplifier, and internal regulator blocks into a low-power consumption mode to save energy. SPI communication is not supported during this state and the SPI registers will revert to their default settings after a full EN_GATE reset. The device will put the MOSFET output stage to high-impedance mode as long as PVDD is still present.
When the EN_GATE pin goes low to high, it will go through a power-up sequence, and enable gate driver, current amplifiers, charge pump, internal regulator, and so forth and reset all latched faults related to gate driver block. The EN_GATE will also reset status registers in the SPI table. All latched faults can be reset when EN_GATE is toggled after an error event unless the fault is still present.
When EN_GATE goes from high to low, it will shut down gate driver block immediately, so gate output can put external FETs in high impedance mode. It will then wait for $10 \mu \mathrm{~s}$ before completely shutting down the rest of the blocks. A quick fault reset mode can be done by toggling EN_GATE pin for a very short period (less than $10 \mu \mathrm{~s}$ ). This will prevent the device from shutting down the other functional blocks such as charge pump and internal regulators and bring a quicker and simple fault recovery. SPI will still function with such a quick EN_GATE reset mode. To perform a full reset, EN_GATE should be toggled for longer than $20 \mu \mathrm{~s}$. This allows for all of the blocks to completely shut down and reach known states.
An EN_GATE reset pulse (high $\rightarrow$ low $\rightarrow$ high) from 10 to $20 \mu \mathrm{~s}$ should not be applied to the EN_GATE pin. The DRV8301 has a transition area from the quick to full reset modes that can cause the device to become unresponsive to external inputs until a full power cycle. An RC filter can be added externally to the pin if reset pulses with this period are expected to occur on the EN_GATE pin.
The other way to reset all of the faults is to use SPI command (RESET_GATE), which will only reset gate driver block and all the SPI status registers without shutting down the other functional blocks.
One exception is to reset a GVDD_OV fault. A quick EN_GATE quick fault reset or SPI command reset will not work with GVDD_OV fault. A complete EN_GATE with low level holding longer than $20 \mu \mathrm{~s}$ is required to reset GVDD_OV fault. TI highly recommends to inspect the system and board when GVDD_OV occurs.

### 7.4.2 DTC

Dead time can be programmed through DTC pin. A resistor should be connected from DTC to ground to control the dead time. Dead time control range is from 50 ns to 500 ns . Short DTC pin to ground will provide minimum dead time ( 50 ns ). Resistor range is 0 to $150 \mathrm{k} \Omega$. Dead time is linearly set over this resistor range.
Current shoot through prevention protection will be enabled in the device all time independent of dead time setting and input mode setting.

### 7.4.3 VDD_SPI

VDD_SPI is the power supply to power SDO pin. It has to be connected to the same power supply ( 3.3 V or 5 V ) that MCU uses for its SPI operation.
During power up or down transient, VDD_SPI pin could be zero voltage shortly. During this period, no SDO signal should be present at SDO pin from any other devices in the system because it causes a parasitic diode in the DRV8301 conducting from SDO to VDD_SPI pin as a short. This should be considered and prevented from system power sequence design.

# Page 21

# 7.5 Programming 

### 7.5.1 SPI Communication

### 7.5.1.1 SPI

The DRV8301 SPI operates as a slave. The SPI input (SDI) data format consists of a 16 bit word with 1 read/write bit, 4 address bits, and 11 data bits. The SPI output (SDO) data format consists of a 16 bit word with 1 frame fault bit, 4 address bits, and 11 data bits. When a frame is not valid, frame fault bit will set to 1 and the remaining bits will shift out as 0 .
A valid frame must meet following conditions:

- Clock must be low when nSCS goes low.
- Should have 16 full clock cycles.
- Clock must be low when nSCS goes high.

When nSCS is asserted high, any signals at the SCLK and SDI pins are ignored and SDO is forced into a high impedance state. When nSCS transitions from HIGH to LOW, SDO is enabled and the SDO response word loads into the shift register based on the previous SPI input word.
The SCLK pin must be low when nSCS transitions low. While nSCS is low, at each rising edge of the clock the response word is serially shifted out on the SDO pin with the MSB shifted out first.
While SCS is low, at each falling edge of the clock the new input word is sampled on the SDI pin. The SPI input word is decoded to determine the register address and access type (read or write). The MSB will be shifted in first. Any amount of time may pass between bits, as long as nSCS stays active low. This allows two 8 -bit words to be used. If the input word sent to SDI is less than 16 bits or more than 16 bits, it is considered a frame error. If it is a write command, the data will be ignored. The fault bit in the next SDO response word will then report 1. After the 16th clock cycle or when nSCS transitions from LOW to HIGH, the SDI shift register data is transferred into a latch where the input word is decoded.
For a READ command (Nth cycle) sent to SDI, SDO will respond with the data at the specified address in the next cycle. ( $\mathrm{N}+1$ )
For a WRITE command (Nth cycle) sent to SDI, SDO will respond with the data in Status Register 1 (0x00) in the next cycle ( $\mathrm{N}+1$ ). This feature is intended to maximize SPI communication efficiency when having multiple write commands.

### 7.5.1.2 SPI Format

The SDI input data word is 16 bits long and consists of:

- 1 read/write bit W [15]
- 4 address bits A [14:11]
- 11 data bits D [10:0]

The SDO output data word is 16 bits long and consists of:

- 1 fault frame bit F [15]
- 4 address bits A [14:11]
- 11 data bits D [10:0]

The SDO output word (Nth cycle) is in response to the previous SDI input word ( $\mathrm{N}-1$ cycle).
Therefore each SPI Query/Response pair requires two full 16 bit shift cycles to complete.
Table 6. SPI Input Data Control Word Format

|  | R/W | ADDRESS |  |  |  | DATA |  |  |  |  |  |  |  |  |  |  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| Word Bit | B15 | B14 | B13 | B12 | B11 | B10 | B9 | B8 | B7 | B6 | B5 | B4 | B3 | B2 | B1 | B0 |
| Command | W0 | A3 | A2 | A1 | A0 | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |

# Page 22

Table 7. SPI Output Data Response Word Format

|  | R/W | DATA |  |  |  |  |  |  |  |  |  |  |  |  |  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| Word Bit | B15 | B14 | B13 | B12 | B11 | B10 | B9 | B8 | B7 | B6 | B5 | B4 | B3 | B2 | B1 |
| Command | F0 | A3 | A2 | A1 | A0 | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 |

# 7.6 Register Maps 

### 7.6.1 Read / Write Bit

The MSB bit of the SDI input word (W0) is a read/write bit. When W0 $=0$, the input word is a write command. When W0 $=1$, input word is a read command.

### 7.6.2 Address Bits

Table 8. Register Address

| REGISTER <br> TYPE | ADDRESS [A3..A0] |  |  |  | REGISTER NAME | DESCRIPTION | READ AND WRITE ACCESS |  |  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| Status <br> Register | 0 | 0 | 0 | 0 | Status Register 1 | Status register for device faults | R |  |  |
|  | 0 | 0 | 0 | 1 | Status Register 2 | Status register for device faults and ID | R |  |  |
| Control <br> Register | 0 | 0 | 1 | 0 | Control Register 1 |  | R/W |  |  |
|  | 0 | 0 | 1 | 1 | Control Register 2 |  | R/W |  |  |

### 7.6.3 SPI Data Bits

### 7.6.3.1 Status Registers

Table 9. Status Register 1 (Address: 0x00) (All Default Values are Zero)

| ADDRESS | REGISTER <br> NAME | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 0x00 | Status <br> Register 1 | FAULT | GVDD_UV | PVDD_UV | OTSD | OTW | FETHA_OC | FETLA_OC | FETHB_OC | FETLB_OC | FETHC_OC | FETLC_OC |

Table 10. Status Register 2 (Address: 0x01) (All Default Values are Zero)

| ADDRESS | REGISTER <br> NAME | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 0x01 | Status <br> Register 2 |  |  |  | GVDD_OV |  |  |  | Device ID <br> [3] | Device ID <br> [2] | Device ID <br> [1] | Device ID <br> [0] |

### 7.6.3.2 Control Registers

Table 11. Control Register 1 for Gate Driver Control (Address: 0x02) ${ }^{(1)}$

| ADDRESS | NAME | DESCRIPTION | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 0x02 | GATE_CURRENT | Gate drive peak current 1.7 A |  |  |  |  |  |  |  |  |  |  | $0^{(1)}$ | $0^{(1)}$ |
|  |  | Gate drive peak current 0.7 A |  |  |  |  |  |  |  |  |  |  | 0 | 1 |
|  |  | Gate drive peak current 0.25 A |  |  |  |  |  |  |  |  |  |  | 1 | 0 |
|  |  | Reserved |  |  |  |  |  |  |  |  |  |  | 1 | 1 |
|  | GATE_RESET | Normal mode |  |  |  |  |  |  |  |  |  | $0^{(1)}$ |  |  |
|  |  | Reset gate driver latched faults (reverts to 0 ) |  |  |  |  |  |  |  |  |  | 1 |  |  |
|  | PWM_MODE | 6 PWM inputs (see Table 1) |  |  |  |  |  |  |  | $0^{(1)}$ |  |  |  |  |
|  |  | 3 PWM inputs (see Table 2) |  |  |  |  |  |  |  | 1 |  |  |  |  |
|  | OCP_MODE | Current limit |  |  |  |  |  |  | $0^{(1)}$ | $0^{(1)}$ |  |  |  |  |
|  |  | OC latch shut down |  |  |  |  |  |  | 0 | 1 |  |  |  |  |
|  |  | Report only |  |  |  |  |  |  | 1 | 0 |  |  |  |  |
|  |  | OC disabled |  |  |  |  |  |  | 1 | 1 |  |  |  |  |
|  | OC_ADJ_SET | See OC_ADJ_SET table |  | X | X | X | X | X |  |  |  |  |  |  |

(1) Default value

# Page 23

Table 12. Control Register 2 for Current Shunt Amplifiers and Misc Control (Address: 0x03) ${ }^{(1)}$

| ADDRESS | NAME | DESCRIPTION | D10 | D9 | D8 | D7 | D6 | D5 | D4 | D3 | D2 | D1 | D0 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| 0x03 | OCTW_MODE | Report both OT and OC at nOCTW pin |  |  |  |  |  |  |  |  |  | $0^{(1)}$ | $0^{(1)}$ |
|  |  | Report OT only |  |  |  |  |  |  |  |  |  | 0 | 1 |
|  |  | Report OC only |  |  |  |  |  |  |  |  |  | 1 | 0 |
|  |  | Report OC only (reserved) |  |  |  |  |  |  |  |  |  | 1 | 1 |
|  | GAIN | Gain of shunt amplifier: 10 V/V |  |  |  |  |  |  |  | $0^{(1)}$ | $0^{(1)}$ |  |  |
|  |  | Gain of shunt amplifier: 20 V/V |  |  |  |  |  |  |  | 0 | 1 |  |  |
|  |  | Gain of shunt amplifier: 40 V/V |  |  |  |  |  |  |  | 1 | 0 |  |  |
|  |  | Gain of shunt amplifier: 80 V/V |  |  |  |  |  |  |  | 1 | 1 |  |  |
|  | DC_CAL_CH1 | Shunt amplifier 1 connects to load through input pins |  |  |  |  |  |  | $0^{(1)}$ |  |  |  |  |
|  |  | Shunt amplifier 1 shorts input pins and disconnects from load for external calibration |  |  |  |  |  |  | 1 |  |  |  |  |
|  | DC_CAL_CH2 | Shunt amplifier 2 connects to load through input pins |  |  |  |  |  | $0^{(1)}$ |  |  |  |  |  |
|  |  | Shunt amplifier 2 shorts input pins and disconnects from load for external calibration |  |  |  |  |  | 1 |  |  |  |  |  |
|  | OC_TOFF | Cycle by cycle |  |  |  |  | $0^{(1)}$ |  |  |  |  |  |  |
|  |  | Off-time control |  |  |  |  | 1 |  |  |  |  |  |  |
|  | Reserved |  |  |  |  |  |  |  |  |  |  |  |  |

(1) Default value

# 7.6.3.3 Overcurrent Adjustment 

Table 13. OC_ADJ_SET Table

| Control Bit (D6-D10) (0xH) | 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| Vds (V) | 0.060 | 0.068 | 0.076 | 0.086 | 0.097 | 0.109 | 0.123 | 0.138 |
| Control Bit (D6-D10) (0xH) | 8 | 9 | 10 | 11 | 12 | 13 | 14 | 15 |
| Vds (V) | 0.155 | 0.175 | 0.197 | 0.222 | 0.250 | 0.282 | 0.317 | 0.358 |
| Control Bit (D6-D10) (0xH) | 16 | 17 | 18 | 19 | 20 | 21 | 22 | 23 |
| Vds (V) | 0.403 | 0.454 | 0.511 | 0.576 | 0.648 | 0.730 | 0.822 | 0.926 |
| Code Number (0xH) | 24 | 25 | 26 | 27 | 28 | 29 | 30 | 31 |
| Vds (V) | 1.043 | 1.175 | 1.324 | 1.491 | $1.679^{(1)}$ | $1.892^{(1)}$ | $2.131^{(1)}$ | $2.400^{(1)}$ |

(1) Do not use settings $28,29,30,31$ for $\mathrm{V}_{\mathrm{DS}}$ sensing if the IC is expected to operate in the $6-\mathrm{V}$ to $8-\mathrm{V}$ range.

# Page 24

# 8 Application and Implementation 

NOTE
Information in the following applications sections is not part of the TI component specification, and TI does not warrant its accuracy or completeness. TI's customers are responsible for determining suitability of components for their purposes. Customers should validate and test their design implementation to confirm system functionality.

### 8.1 Application Information

The DRV8301 is a gate driver designed to drive a 3-phase BLDC motor in combination with external power MOSFETs. The device provides a high level of integration with three half-bridge gate drivers, two current shunt amplifiers, and overcurrent protection.

### 8.1.1 Gate Driver Power-Up Sequencing Errata

The DRV8301 gate drivers may not correctly power up if a voltage greater than 8.5 V is present on any $\mathrm{SH} \_X$ pin when EN_GATE is brought logic high (device enabled) after PVDD1 power is applied (PVDD1 > PVDD_UV). This sequence should be avoided by ensuring the voltage levels on the SH_X pins are less than 8.5 V when the DRV8301 is enabled through EN_GATE.

# Page 25

# 8.2 Typical Application 

The following design is a common application of the DRV8301.
![img-7.jpeg](img-7.jpeg)

Figure 7. Typical Application Schematic

# Page 26

# Typical Application (continued) 

### 8.2.1 Design Requirements

Table 14 shows the design parameters for this application.
Table 14. Design Parameters

| DESIGN PARAMETER | REFERENCE | VALUE |
| :-- | :--: | :--: |
| Supply voltage | PVDD | 24 V |
| Motor winding resistance | $\mathrm{M}_{\mathrm{R}}$ | $0.5 \Omega$ |
| Motor winding inductance | $\mathrm{M}_{\mathrm{L}}$ | 0.28 mH |
| Motor poles | $\mathrm{M}_{\mathrm{P}}$ | 16 poles |
| Motor rated RPM | $\mathrm{M}_{\mathrm{RPM}}$ | 4000 RPM |
| Target full-scale current | $\mathrm{I}_{\mathrm{MAX}}$ | 14 A |
| Sense resistor | $\mathrm{R}_{\text {SENSE }}$ | $0.01 \Omega$ |
| MOSFET $\mathrm{Q}_{\mathrm{g}}$ | $\mathrm{Q}_{\mathrm{g}}$ | 29 nC |
| MOSFET RDS(on) | $\mathrm{R}_{\mathrm{DS}(\mathrm{on})}$ | $4.7 \mathrm{~m} \Omega$ |
| VDS trip level | OC_ADJ_SET | 0.123 V |
| Switching frequency | $f_{\text {SW }}$ | 45 kHz |
| Series gate resistance | $\mathrm{R}_{\mathrm{GATE}}$ | $10 \Omega$ |
| Amplifier reference | $\mathrm{V}_{\text {REF }}$ | 3.3 V |
| Amplifier gain | Gain | $10 \mathrm{~V} / \mathrm{V}$ |

### 8.2.2 Detailed Design Procedure

### 8.2.2.1 Gate Drive Average Current Load

The gate drive supply (GVDD) of the DRV8301 can deliver up to 30 mA (RMS) of current to the external power MOSFETs. Use Equation 3 to determine the approximate RMS load on the gate drive supply:

Gate Drive RMS Current $=$ MOSFET Qg $\times$ Number of Switching MOSFETs $\times$ Switching Frequency
Example:
$7.83 \mathrm{~mA}=29 \mathrm{nC} \times 6 \times 45 \mathrm{kHz}$
This is a rough approximation only.

### 8.2.2.2 Overcurrent Protection Setup

The DRV8301 provides overcurrent protection for the external power MOSFETs through the use of $\mathrm{V}_{\mathrm{DS}}$ monitors for both the high side and low side MOSFETs. These are intended for protecting the MOSFET in overcurrent conditions and not for precise current regulation.
The overcurrent protection works by monitoring the $\mathrm{V}_{\mathrm{DS}}$ voltage of the external MOSFET and comparing it against the OC_ADJ_SET register value. If the $\mathrm{V}_{\mathrm{DS}}$ exceeds the OC_ADJ_SET value the DRV8301 takes action according to the OC_MODE register.

Overcurrent Trip = OC_ADJ_SET / MOSFET R $_{\text {DS(on) }}$
Example:
$26.17 \mathrm{~A}=0.123 \mathrm{~V} / 4.7 \mathrm{~m} \Omega$
MOSFET $\mathrm{R}_{\mathrm{DS}(\mathrm{on})}$ changes with temperature and this will affect the overcurrent trip level.

### 8.2.2.3 Sense Amplifier Setup

The DRV8301 provides two bidirectional low-side current shunt amplifiers. These can be used to sense a sum of the three half-bridges, two of the half-bridges individually, or in conjunction with an additional shunt amplifier to sense all three half-bridges individually.

1. Determine the peak current that the motor will demand ( $\mathrm{I}_{\text {MAX }}$ ). This will be dependent on the motor parameters and your specific application. $\mathrm{I}_{\text {(MAX) }}$ in this example is 14 A .
2. Determine the available voltage range for the current shunt amplifier. This will be $\pm$ half of the amplifier

# Page 27

reference voltage $\left(\mathrm{V}_{\text {REF }}\right)$. In this case the available range is $\pm 1.65 \mathrm{~V}$.
3. Determine the sense resistor value and amplifier gain settings. There are common tradeoffs for both the sense resistor value and amplifier gain. The larger the sense resistor value, the better the resolution of the half-bridge current. This comes at the cost of additional power dissipated from the sense resistor. A larger gain value will allow you to decrease the sense resistor, but at the cost of increased noise in the output signal. This example uses a $0.01 \Omega$ sense resistor and the minimum gain setting of the DRV8301 (10 V/V). These values allow the current shunt amplifiers to measure $\pm 16.5 \mathrm{~A}$ (some additional margin on the 14 A requirement).

# 8.2.3 Application Curves 

![img-8.jpeg](img-8.jpeg)

# Page 28

# 9 Power Supply Recommendations 

### 9.1 Bulk Capacitance

Having appropriate local bulk capacitance is an important factor in motor drive system design. It is generally beneficial to have more bulk capacitance, while the disadvantages are increased cost and physical size.
The amount of local capacitance needed depends on a variety of factors, including:

- The highest current required by the motor system
- The capacitance of the power supply and its ability to source or sink current
- The amount of parasitic inductance between the power supply and motor system
- The acceptable voltage ripple
- The type of motor used (brushed DC, brushless DC, stepper)
- The motor braking method

The inductance between the power supply and motor drive system will limit the rate current can change from the power supply. If the local bulk capacitance is too small, the system will respond to excessive current demands or dumps from the motor with a change in voltage. When adequate bulk capacitance is used, the motor voltage remains stable and high current can be quickly supplied.
The data sheet generally provides a recommended value, but system-level testing is required to determine the appropriate sized bulk capacitor.
![img-9.jpeg](img-9.jpeg)

Figure 12. Example Setup of Motor Drive System With External Power Supply
The voltage rating for bulk capacitors should be higher than the operating voltage, to provide margin for cases when the motor transfers energy to the supply.

# Page 29

# 10 Layout 

### 10.1 Layout Guidelines

Use these layout recommendations when designing a PCB for the DRV8301.

- The DRV8301 makes an electrical connection to GND through the PowerPAD. Always check to ensure that the PowerPAD has been properly soldered (See PowerPAD ${ }^{\text {TM }}$ Thermally Enhanced Package application report, SLMA002).
- PVDD bypass capacitors should be placed close to their corresponding pins with a low impedance path to device GND (PowerPAD).
- GVDD bypass capacitor should be placed close its corresponding pin with a low impedance path to device GND (PowerPAD).
- AVDD and DVDD bypass capacitors should be placed close to their corresponding pins with a low-impedance path to the AGND pin. It is preferable to make this connection on the same layer.
- AGND should be tied to device GND (PowerPAD) through a low impedance trace/copper fill.
- Add stitching vias to reduce the impedance of the GND path from the top to bottom side.
- Try to clear the space around and underneath the DRV8301 to allow for better heat spreading from the PowerPAD.

# Page 30

![img-10.jpeg](img-10.jpeg)

Figure 13. Top and Bottom Layer Layout Schematic

# Page 31

# 11 Device and Documentation Support 

### 11.1 Documentation Support

### 11.1.1 Related Documentation

For related documentation see the following:

- Semiconductor and IC Package Thermal Metrics application report, SPRA953
- PowerPAD ${ }^{\text {TM }}$ Thermally Enhanced Package application report, SLMA002


### 11.2 Community Resources

The following links connect to TI community resources. Linked contents are provided "AS IS" by the respective contributors. They do not constitute TI specifications and do not necessarily reflect TI's views; see TI's Terms of Use.
TI E2E ${ }^{\text {TM }}$ Online Community TI's Engineer-to-Engineer (E2E) Community. Created to foster collaboration among engineers. At e2e.ti.com, you can ask questions, share knowledge, explore ideas and help solve problems with fellow engineers.
Design Support TI's Design Support Quickly find helpful E2E forums along with design support tools and contact information for technical support.

### 11.3 Trademarks

PowerPAD, E2E are trademarks of Texas Instruments.
All other trademarks are the property of their respective owners.

### 11.4 Electrostatic Discharge Caution

These devices have limited built-in ESD protection. The leads should be shorted together or the device placed in conductive foam during storage or handling to prevent electrostatic damage to the MOS gates.

### 11.5 Glossary

SLYZ022 - TI Glossary.
This glossary lists and explains terms, acronyms, and definitions.

## 12 Mechanical, Packaging, and Orderable Information

The following pages include mechanical, packaging, and orderable information. This information is the most current data available for the designated devices. This data is subject to change without notice and revision of this document. For browser-based versions of this data sheet, refer to the left-hand navigation.

# Page 32

# PACKAGE OPTION ADDENDUM

|  Orderable part number | Status
(1) | Material type
(2) | Package | Pins | Package qty | Carrier | RoHS
(3) | Lead finish/
Ball material
(4) | MSL rating/
Peak reflow
(5) | Op temp ( ${ }^{\circ} \mathrm{C}$ ) | Part marking
(6)  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
|  DRV8301DCA | Active | Production | HTSSOP (DCA) | 56 | 35 | TUBE | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCA.A | Active | Production | HTSSOP (DCA) | 56 | 35 | TUBE | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCA.B | Active | Production | HTSSOP (DCA) | 56 | 35 | TUBE | - | Call TI | Call TI | $-40$ to 125 |   |
|  DRV8301DCAR | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCAR.A | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCAR.B | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | - | Call TI | Call TI | $-40$ to 125 |   |
|  DRV8301DCARG4 | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCARG4.A | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | Yes | NIPDAU | Level-3-260C-168 HR | $-40$ to 125 | DRV8301  |
|  DRV8301DCARG4.B | Active | Production | HTSSOP (DCA) | 56 | 2000 | LARGE T\&R | - | Call TI | Call TI | $-40$ to 125 |   |

${ }^{(1)}$ Status: For more details on status, see our product life cycle. ${ }^{(2)}$ Material type: When designated, preproduction parts are prototypes/experimental devices, and are not yet approved or released for full production. Testing and final process, including without limitation quality assurance, reliability performance testing, and/or process qualification, may not yet be complete, and this item is subject to further changes or possible discontinuation. If available for ordering, purchases will be subject to an additional waiver at checkout, and are intended for early internal evaluation purposes only. These items are sold without warranties of any kind. ${ }^{(3)}$ RoHS values: Yes, No, RoHS Exempt. See the TI RoHS Statement for additional information and value definition. ${ }^{(4)}$ Lead finish/Ball material: Parts may have multiple material finish options. Finish options are separated by a vertical ruled line. Lead finish/Ball material values may wrap to two lines if the finish value exceeds the maximum column width. ${ }^{(5)}$ MSL rating/Peak reflow: The moisture sensitivity level ratings and peak solder (reflow) temperatures. In the event that a part has multiple moisture sensitivity ratings, only the lowest level per JEDEC standards is shown. Refer to the shipping label for the actual reflow temperature that will be used to mount the part to the printed circuit board. ${ }^{(6)}$ Part marking: There may be an additional marking, which relates to the logo, the lot trace code information, or the environmental category of the part.

Multiple part markings will be inside parentheses. Only one part marking contained in parentheses and separated by a "-" will appear on a part. If a line is indented then it is a continuation of the previous line and the two combined represent the entire part marking for that device.

Important Information and Disclaimer:The information provided on this page represents TI's knowledge and belief as of the date that it is provided. TI bases its knowledge and belief on information provided by third parties, and makes no representation or warranty as to the accuracy of such information. Efforts are underway to better integrate information from third parties. TI has taken and continues to take reasonable steps to provide representative

# Page 33

and accurate information but may not have conducted destructive testing or chemical analysis on incoming materials and chemicals. TI and TI suppliers consider certain information to be proprietary, and thus CAS numbers and other limited information may not be available for release.

In no event shall TI's liability arising out of such information exceed the total purchase price of the TI part(s) at issue in this document sold by TI to Customer on an annual basis.

# OTHER QUALIFIED VERSIONS OF DRV8301 : 

- Automotive : DRV8301-Q1

NOTE: Qualified Version Definitions:

- Automotive - Q100 devices qualified for high-reliability automotive applications targeting zero defects

# Page 34

# TAPE AND REEL INFORMATION 

![img-11.jpeg](img-11.jpeg)

TAPE DIMENSIONS
![img-12.jpeg](img-12.jpeg)

| A0 | Dimension designed to accommodate the component width |
| :-- | :-- |
| B0 | Dimension designed to accommodate the component length |
| K0 | Dimension designed to accommodate the component thickness |
| W | Overall width of the carrier tape |
| P1 | Pitch between successive cavity centers |

QUADRANT ASSIGNMENTS FOR PIN 1 ORIENTATION IN TAPE
![img-13.jpeg](img-13.jpeg)

Pocket Quadrants
*All dimensions are nominal

| Device | Package <br> Type | Package <br> Drawing | Pins | SPQ | Reel <br> Diameter <br> (mm) | Reel <br> Width <br> W1 (mm) | A0 <br> (mm) | B0 <br> (mm) | K0 <br> (mm) | P1 <br> (mm) | W <br> (mm) | Pin1 <br> Quadrant |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| DRV8301DCAR | HTSSOP | DCA | 56 | 2000 | 330.0 | 24.4 | 8.6 | 15.6 | 1.8 | 12.0 | 24.0 | Q1 |
| DRV8301DCARG4 | HTSSOP | DCA | 56 | 2000 | 330.0 | 24.4 | 8.6 | 15.6 | 1.8 | 12.0 | 24.0 | Q1 |

# Page 35

# PACKAGE MATERIALS INFORMATION

## TAPE AND REEL BOX DIMENSIONS

![img-14.jpeg](img-14.jpeg)

*All dimensions are nominal

|  Device | Package Type | Package Drawing | Pins | SPQ | Length (mm) | Width (mm) | Height (mm)  |
| --- | --- | --- | --- | --- | --- | --- | --- |
|  DRV8301DCAR | HTSSOP | DCA | 56 | 2000 | 350.0 | 350.0 | 43.0  |
|  DRV8301DCARG4 | HTSSOP | DCA | 56 | 2000 | 350.0 | 350.0 | 43.0  |

# Page 36

# PACKAGE MATERIALS INFORMATION

www.ti.com 18-Jul-2025

## TUBE

![img-15.jpeg](img-15.jpeg)

|  *All dimensions are nominal |  |  |  |  |  |  |   |
| --- | --- | --- | --- | --- | --- | --- | --- |
|  Device | Package Name | Package Type | Pins | SPQ | L (mm) | W (mm) | T (m)  |
|  DRV8301DCA | DCA | HTSSOP | 56 | 35 | 530 | 11.89 | 3600  |
|  DRV8301DCA.A | DCA | HTSSOP | 56 | 35 | 530 | 11.89 | 3600  |

# Page 37

# GENERIC PACKAGE VIEW 

## DCA 56

PowerPAD ${ }^{\text {TM }}$ TSSOP - 1.2 mm max height
$8.1 \times 14,0.5 \mathrm{~mm}$ pitch

This image is a representation of the package family, actual package may vary.
Refer to the product data sheet for package details.
![img-16.jpeg](img-16.jpeg)

# Page 38

![img-17.jpeg](img-17.jpeg)

NOTES: A. All linear dimensions are in millimeters. Dimensioning and tolerancing per ASME Y14.5M-1994.
B. This drawing is subject to change without notice.
C. Body dimensions do not include mold flash or protrusion not to exceed 0,15 .
D. This package is designed to be soldered to a thermal pad on the board. Refer to Technical Brief, PowerPad
Thermally Enhanced Package, Texas Instruments Literature No. SLMAOO2 for information regarding recommended board layout. This document is available at www.ti.com <http://www.ti.com>.
E. See the additional figure in the Product Data Sheet for details regarding the exposed thermal pad features and dimensions.
F. Falls within JEDEC MO-153

PowerPAD is a trademark of Texas Instruments.

# Page 39

# THERMAL PHARMACY 

## THERMAL INFORMATION

This PowerPAD ${ }^{\text {TM }}$ package incorporates an exposed thermal pad that is designed to be attached to a printed circuit board (PCB). The thermal pad must be soldered directly to the PCB. After soldering, the PCB can be used as a heatsink. In addition, through the use of thermal vias, the thermal pad can be attached directly to the appropriate copper plane shown in the electrical schematic for the device, or alternatively, can be attached to a special heatsink structure designed into the PCB. This design optimizes the heat transfer from the integrated circuit (IC).
For additional information on the PowerPAD package and how to take advantage of its heat dissipating abilities, refer to Technical Brief, PowerPAD Thermally Enhanced Package, Texas Instruments Literature No. SLMAOO2 and Application Brief, PowerPAD Made Easy, Texas Instruments Literature No. SLMAOO4. Both documents are available at www.ti.com.
The exposed thermal pad dimensions for this package are shown in the following illustration.
![img-18.jpeg](img-18.jpeg)

NOTES: A. All linear dimensions are in millimeters
A. Keep-out features are identified to prevent board routing interference.

These exposed metal features may vary within the identified area or completely absent on some devices.

PowerPAD is a trademark of Texas Instruments.

# Page 40

DCA (R-PDSO-G56) PowerPAD ${ }^{\text {TM }}$ PLASTIC SMALL OUTLINE PACKAGE
![img-19.jpeg](img-19.jpeg)

| Center PowerPAD Solder Stencil Opening |  |  |
| :--: | :--: | :--: |
| Stencil Thickness | $X$ | $Y$ |
| 0.1 mm | 7.16 | 4.07 |
| 0.127 mm | 6.35 | 3.61 |
| 0.152 mm | 5.80 | 3.30 |
| 0.178 mm | 5.36 | 3.05 |

NOTES: A. All linear dimensions are in millimeters.
B. This drawing is subject to change without notice.
C. Customers should place a note on the circuit board fabrication drawing not to alter the center solder mask defined pad.
D. This package is designed to be soldered to a thermal pad on the board. Refer to Technical Brief, PowerPad
Thermally Enhanced Package, Texas Instruments Literature No. SLMAOO2, SLMAOO4, and also the Product Data Sheets for specific thermal information, via requirements, and recommended board layout. These documents are available at www.ti.com <http://www.ti.com>. Publication IPC-7351 is recommended for alternate designs.
E. Laser cutting apertures with trapezoidal walls and also rounding corners will offer better paste release. Customers should contact their board assembly site for stencil design recommendations. Example stencil design based on a $50 \%$ volumetric metal load solder paste. Refer to IPC-7525 for other stencil recommendations.
F. Customers should contact their board fabrication site for solder mask tolerances between and around signal pads.

# Page 41

# IMPORTANT NOTICE AND DISCLAIMER 

TI PROVIDES TECHNICAL AND RELIABILITY DATA (INCLUDING DATASHEETS), DESIGN RESOURCES (INCLUDING REFERENCE DESIGNS), APPLICATION OR OTHER DESIGN ADVICE, WEB TOOLS, SAFETY INFORMATION, AND OTHER RESOURCES "AS IS" AND WITH ALL FAULTS, AND DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY RIGHTS.
These resources are intended for skilled developers designing with TI products. You are solely responsible for (1) selecting the appropriate TI products for your application, (2) designing, validating and testing your application, and (3) ensuring your application meets applicable standards, and any other safety, security, regulatory or other requirements.
These resources are subject to change without notice. TI grants you permission to use these resources only for development of an application that uses the TI products described in the resource. Other reproduction and display of these resources is prohibited. No license is granted to any other TI intellectual property right or to any third party intellectual property right. TI disclaims responsibility for, and you fully indemnify TI and its representatives against any claims, damages, costs, losses, and liabilities arising out of your use of these resources.
TI's products are provided subject to TI's Terms of Sale, TI's General Quality Guidelines, or other applicable terms available either on ti.com or provided in conjunction with such TI products. TI's provision of these resources does not expand or otherwise alter TI's applicable warranties or warranty disclaimers for TI products. Unless TI explicitly designates a product as custom or customer-specified, TI products are standard, catalog, general purpose devices.
TI objects to and rejects any additional or different terms you may propose.

